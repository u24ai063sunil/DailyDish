{% extends 'base.html' %}
{% block title %}{{ category }} Recipes - DailyDish{% endblock %}
{% block content %}

<h1>{{ category }} Recipes <span style="color: var(--text-muted); font-size: 1.5rem;">({{ recipes.count }})</span></h1>

<!-- Filter Section -->
<div class="filter-section">
  <h3>ğŸ” Filter {{ category }} Recipes</h3>
  
  <form method="get">
    <div class="grid-2">
      
      <div>
        <label for="difficulty">Difficulty</label>
        <select name="difficulty" id="difficulty">
          <option value="">All Levels</option>
          <option value="Easy" {% if difficulty_filter == 'Easy' %}selected{% endif %}>Easy</option>
          <option value="Medium" {% if difficulty_filter == 'Medium' %}selected{% endif %}>Medium</option>
          <option value="Hard" {% if difficulty_filter == 'Hard' %}selected{% endif %}>Hard</option>
        </select>
      </div>

      <div>
        <label for="diet">Diet</label>
        <select name="diet" id="diet">
          <option value="">All</option>
          <option value="vegetarian" {% if diet_filter == 'vegetarian' %}selected{% endif %}>ğŸŒ± Vegetarian</option>
          <option value="vegan" {% if diet_filter == 'vegan' %}selected{% endif %}>ğŸŒ¿ Vegan</option>
        </select>
      </div>
    </div>

    <div style="display: flex; gap: 15px; margin-top: 20px; flex-wrap: wrap;">
      <button type="submit" style="flex: 1; min-width: 200px;">Apply Filters</button>
      <a href="{% url 'recipes_by_category' category %}" class="btn" style="flex: 1; min-width: 200px; display: flex; align-items: center; justify-content: center; background: #555; text-decoration: none;">Clear Filters</a>
    </div>
  </form>
</div>

{% if recipes %}
  {% for recipe in recipes %}
    <div class="recipe-card">
      <div style="display: flex; justify-content: space-between; align-items: start; flex-wrap: wrap; gap: 15px; margin-bottom: 15px;">
        <h2 style="margin: 0; flex: 1;">{{ recipe.title }}</h2>
        <div style="display: flex; gap: 10px; flex-wrap: wrap;">
          {% if recipe.is_vegetarian %}
            <span class="badge badge-veg">ğŸŒ± Vegetarian</span>
          {% endif %}
          {% if recipe.is_vegan %}
            <span class="badge badge-vegan">ğŸŒ¿ Vegan</span>
          {% endif %}
        </div>
      </div>
      
      {% if recipe.description %}
        <p style="font-style: italic; margin-bottom: 20px; font-size: 1.05rem;">{{ recipe.description }}</p>
      {% endif %}

      <div style="display: flex; flex-wrap: wrap; gap: 25px; margin: 20px 0; padding: 20px; background: rgba(0, 255, 200, 0.05); border-radius: 12px; border: 1px solid rgba(0, 255, 200, 0.1);">
        <div><strong>Difficulty:</strong> 
          <span class="badge badge-{% if recipe.difficulty == 'Easy' %}easy{% elif recipe.difficulty == 'Medium' %}medium{% else %}hard{% endif %}">
            {{ recipe.difficulty }}
          </span>
        </div>
        {% if recipe.cuisine %}
          <div><strong>Cuisine:</strong> <span style="color: var(--text-secondary);">{{ recipe.cuisine }}</span></div>
        {% endif %}
        <div><strong>â±ï¸ Prep:</strong> <span style="color: var(--text-secondary);">{{ recipe.prep_time }} mins</span></div>
        <div><strong>ğŸ”¥ Cook:</strong> <span style="color: var(--text-secondary);">{{ recipe.cook_time }} mins</span></div>
        <div><strong>â° Total:</strong> <span style="color: var(--primary-color); font-weight: 700;">{{ recipe.total_time }} mins</span></div>
        <div><strong>ğŸ‘¥ Servings:</strong> <span style="color: var(--text-secondary);">{{ recipe.servings }}</span></div>
      </div>

      <div style="margin-bottom: 25px;">
        <h3 style="color: var(--primary-color); font-size: 1.3rem; margin-bottom: 12px;">ğŸ“‹ Ingredients</h3>
        <p style="white-space: pre-line; color: var(--text-secondary); line-height: 1.8; padding-left: 15px;">{{ recipe.ingredients }}</p>
      </div>
      
      <div style="margin-bottom: 25px;">
        <h3 style="color: var(--primary-color); font-size: 1.3rem; margin-bottom: 12px;">ğŸ‘¨â€ğŸ³ Instructions</h3>
        <p style="white-space: pre-line; color: var(--text-secondary); line-height: 1.8; padding-left: 15px;">{{ recipe.instructions }}</p>
      </div>
    </div>
  {% endfor %}
{% else %}
  <div class="recipe-card" style="text-align: center; padding: 60px 30px;">
    <h2 style="margin-bottom: 20px;">ğŸ˜” No {{ category }} recipes found</h2>
    <p style="font-size: 1.1rem; margin-bottom: 30px;">No {{ category }} recipes match your current filters.</p>
    <a href="{% url 'recipes_by_category' category %}" class="btn" style="width: auto; display: inline-block; padding: 14px 30px;">Clear Filters</a>
  </div>
{% endif %}

<a href="{% url 'recipe_list' %}" style="display: inline-flex; align-items: center; gap: 8px; margin-top: 30px; font-size: 1.1rem; font-weight: 600;">
  â† Back to All Recipes
</a>

{% endblock %}